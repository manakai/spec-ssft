<!DOCTYPE html>
<html lang="en" class="formal-specification status-work-in-progress">
<head>
<title>Selectors Serialization Format for Testing (SSFT) Specification</title>
<link rel="stylesheet" href="http://suika.fam.cx/www/style/html/spec">
<link rel="license" href="http://suika.fam.cx/c/gnu/fdl">
</head>
<body class="has-abstract">

<div class="header">
<h1>Selectors Serialization Format for Testing (<abbr>SSFT</abbr>)
Specification</h1>
<h2>Working Draft 25 September 2007</h2>

<dl class="versions-uri">
<dt>This Version</dt>
  <dd><code class="URI">&lt;<a href="http://suika.fam.cx/www/markup/selectors/ssft/ssft"
      >http://suika.fam.cx/www/markup/selectors/ssft/ssft</a>&gt;</code></dd>
<dt>Latest Version</dt>
  <dd><code class="URI">&lt;<a href="http://suika.fam.cx/www/markup/selectors/ssft/ssft"
      >http://suika.fam.cx/www/markup/selectors/ssft/ssft</a>&gt;</code></dd>
<!--
<dt>Latest Working Draft</dt>
-->
<!-- <dt>Previous Version</dt> -->
</dl>
<dl class="authors" id="author">
<dt>Author</dt>
  <dd><a href="http://suika.fam.cx/~wakaba/who?" rel="author"
      lang=ja>Wakaba</a>
  <code class="mail">&lt;<a href="mailto:w@suika.fam.cx" rel="author"
      >w@suika.fam.cx</a>&gt;</code></dd>
</dl>

<p class="copyright" lang="en">&#xA9; 2007 <a
    href="http://suika.fam.cx/~wakaba/who?" rel="author">Wakaba</a>.
Permission is granted to copy, distribute and/or modify this document
under the terms of the <a rel="license"
href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</a>,
Version 1.2
or any later version published by the <a
href="http://www.fsf.org/">Free Software Foundation</a>;
with no Invariant Sections, no Front‐Cover Texts, and no Back‐Cover
Texts.  A copy of the license is
available at <code class="URI">&lt;<a
    href="http://www.gnu.org/copyleft/fdl.html"
    rel="license">http://www.gnu.org/copyleft/fdl.html</a>&gt;</code>.</p>
</div>

<div id="abstract" class="section">
<h2>Abstract</h2>

<div class="ed issue">...</div>

</div>

<div id="status" class="section">
<h2>Status of This Document</h2>

<p><em>This section describes the status of this document
at the time of its publication.  Other documents
might supersede this document.</em></p>

<p>This document is a working draft.
It might be updated, replaced, or obsoleted by
other documents at any time.  It is inappropriate to
cite this document as other than <q>work in progress</q>.</p>

<p>Comments on this document are welcome and
may be sent to the <a href="#author">author</a>.</p>

<p>Translations of thie document might be available.
The English version of the document is the only
normative version.</p>
</div>

<div id="introduction" class="section">
<h2>Introduction</h2>

<p>This section is <em>informative</em>.</p>

<div class="issue ed">...</div>

<p><a href="http://dev.w3.org/cvsweb/csswg/cssom/Overview.html">The 
<abbr title="Cascading Style Sheets Object Model">CSSOM</abbr> 
specification</a> 
<cite class="bibref informative">[<a href="#bib-CSSOM">CSSOM</a>]</cite> 
is trying to define an algorithm to
<a href="http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?rev=1.55&amp;content-type=text/html;%20charset=utf-8#serializing0">serialize
a group of selectors</a> for the purpose of <code>selectorText</code>
attribute.  However, the algorithm is incomplete
at the time of the writing.  Note that current Web browser implementations
of the <code>selectorText</code> attribute are consistently broken
in not escaping unsafe identifiers.</p>

</div>

<div class="section" id="terminology">
<h2>Terminology</h2>

<p>The key words <q><em class="rfc2119">MUST</em></q>,
<q><em class="rfc2119">MUST NOT</em></q>,
<q><em class="rfc2119">SHOULD</em></q>,
<q><em class="rfc2119">SHOULD NOT</em></q>, and
<q><em class=rfc2119>MAY</em></q> in this
document are to be interpreted as described in 
<abbr title="Request for Comments">RFC</abbr> 2119
<cite class="bibref normative">[<a href="#ref-KEYWORDS">KEYWORDS</a>]</cite>.</p>
</div>

<div class="section" id="serializing">
<h2>Serializing Groups of Selectors</h2>

<div class="issue ed">
<p><a href="http://suika.fam.cx/gate/cvs/*checkout*/markup/html/whatpm/Whatpm/CSS/SelectorsSerializer.pm">See the reference implementation</a>
for now.</p>
</div>

<p><dfn id=newline>Newline</dfn> is <code class=char>U+000A</code>
<code class=charname>LINE FEED</code> <span class=ed>or
U+000D U+000A or U+000A ??</span>.</p>

<!-- TODO: link terms to Selectors -->

<ol>
<li>Let <var>result</var> an empty string.</li>
<li>For each selector (<var>selector</var>) in the group of selectors:
  <ol>
  <li>If <var>selector</var> is <em>not</em> the first selector
  in the group of selectors, then append a <code class=char>U+002C</code>
  <code class=charname>COMMA</code> followed by a
  <a href="#newline">newline</a> to <var>result</var>.</li>
  <li>Append four <code class=char>U+0020</code>
  <code class=charname>SPACE</code> characters to <var>result</var>.</li>
  <li>Process each sequence of simple selectors or
  combinator in <var>selector</var> by following algorithm:
    <dl class=switch>
    <dt>If it is a sequence of simle selector (<var>sss</var>)</dt>
      <dd class=ed>@@</dd>
    <dt>If it is a combinator (<var>c</var>)</dt>
      <dd>
        <ol>
        <li>Append two <code class=char>U+0020</code>
        <code class=charname>SPACE</code> characters to <var>result</var>.</li>
        <li>
          <dl class=switch>
          <dt>If <var>c</var> is descendant combinator (white space)</dt>
            <dd>Append a <code class=char>U+0020</code>
            <code class=charname>SPACE</code> character to
            <var>result</var>.</dd>
          <dt>If <var>c</var> is child combinator
          (<code class=char>></code>)</dt>
            <dd>Append a <code class=char>U+003E</code>
            <code class=charname>GREATER-THAN SIGN</code> character to
            <var>result</var>.</dd>
          <dt>If <var>c</var> is adjacent sibling combinator
          (<code class=char>+</code>)</dt>
            <dd>Append a <code class=char>U+0020</code>
            <code class=charname>SPACE</code> character to
            <var>result</var>.</dd>
          <dt>If <var>c</var> is general sibling combinator
          (<code class=char>~</code>)</dt>
            <dd>Append a <code class=char>U+007E</code>
            <code class=charname>TILDE</code> character to
            <var>result</var>.</dd>
          </dl>
        </li>
        <li>Append a <code class=char>U+0020</code>
        <code class=charname>SPACE</code> character to
        <var>result</var>.</li>
        </ol>
      </dd>
    </dl>
  </ol>
</li>
<li>Then, <var>result</var> is the 
<abbr title="Selectors Serialization Format for Testing">SFFT</abbr>
representation of the group of selectors.</li>
</ol>

</div>

<div class="section" id="parsing">
<h2>Parsing 
<abbr title="Selectors Serialization Format for Testing">SFFT</abbr>
Groups of Selectors</h2>

<p>Since <a href="#serializing">the serializing algorithm</a> is 
so designed that it always output a valid 
<a href="http://www.w3.org/TR/css3-selectors/#grouping">group of
selectors</a>, no special parser for
<abbr title="Selectors Serialization Format for Testing">SFFT</abbr>
is necessary.  Any conforming 
<a href="http://www.w3.org/TR/css3-selectors/#grouping">group of
selectors</a> parser <em class=rfc2119>MAY</em> be used
to parse <abbr title="Selectors Serialization Format for Testing">SFFT</abbr> 
groups of selectors.</p>
</div>

<div class="section" id="examples">
<h2>Examples</h2>

<p>This section is <em>informative</em>.</p>

<div class="ed issue">
<p><a href="http://suika.fam.cx/gate/2007/css/parser-interface">Try demo</a>,
by choosing <q>Selectors</q> radio button.</a></p>

<div class="example figure block">
<div class="caption">...</div>

<pre><code>...</code></pre>
</div>

</div>

</div>

<div id="references" class="section reference">
<h2>References</h1>

<div id="normative-references" class="section normative reference">
<h3>Normative References</h3>

<dl>
<dt id="ref-KEYWORDS">KEYWORDS</dt>
  <dd><cite><a href="urn:ietf:rfc:2119">Key words for use in 
  <abbr>RFCs</abbr> to Indicate Requirement Levels</a></cite>,
  <abbr title="Internet Engineering Task Force">IETF</abbr> 
  <a href="urn:ietf:bcp:14"><abbr title="Best Current Practice">BCP</abbr> 
  14</a>, <abbr title="Request for Comments">RFC</abbr> 2119, March 1997.
  This version of the specification is referenced</dd>
<dt id=ref-SELECTORS>SELECTORS</dt>
  <dd><a href="http://www.w3.org/TR/2005/WD-css3-selectors-20051215"><cite>Selectors</cite></a>,
  <abbr title="World Wide Web Consortium">W3C</abbr> Working Draft,
  15 December 2005.  Work in progress.  
  <a href="http://www.w3.org/TR/css3-selectors">The latest version</a>
  of the specification is referenced.</dd>
</dl>
</div>

<div id="informative-references" class="section informative reference">
<h3>Informative References</h3>

<dl>
<dt id=ref-CSSOM>CSSOM</dt>
  <dd><cite><a href="http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?rev=1.55&amp;content-type=text/html;%20charset=utf-8">Cascading
  Style Sheets Object Model (<abbr>CSSOM</abbr>)</a></cite>,
  <abbr title="World Wide Web Consortium">W3C</abbr> Editor's Draft,
  18 June 2007.  Work in progress.  The latest Editor's Draft
  of the specification is available at
  <code class=uri>&lt;<a href="http://dev.w3.org/csswg/cssom/Overview.html">http://dev.w3.org/csswg/cssom/Overview.html</a>></code>.</dd>
</dl>
</div>

</div>

</body>
</html>
